name: Trivy Container Scan

description: Run Trivy to scan container images

runs:
  using: "composite"
  steps:
    - name: Build Docker Image
      run: |
        docker build -t vulnerable-image:latest . || true
      shell: bash

    - name: Run Trivy
      uses: aquasecurity/trivy-action@master
      with:
        image-ref: 'vulnerable-image:latest'
        format: 'json'
        output: 'results/trivy-results.json'
      continue-on-error: true
